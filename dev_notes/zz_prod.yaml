version: '1.0'
metadata:
  description: Shuttle post-install user configuration
  environment: production
  created: '2025-07-01 15:59:43'
  generated_by: Configuration Wizard
  mode: production
settings:
  create_home_directories: true
  backup_existing_users: true
  validate_before_apply: true
  interactive_mode: non-interactive
components:
  install_samba: true
  install_acl: true
  configure_users_groups: true
  configure_samba: true
  configure_firewall: true
---
type: group
group:
  name: shuttle_config_readers
  description: Read access to config, key, and ledger
  gid: 5001
---
type: group
group:
  name: shuttle_data_owners
  description: Owns all data directories
  gid: 5002
---
type: group
group:
  name: shuttle_log_owners
  description: Write access to logs
  gid: 5003
---
type: group
group:
  name: shuttle_ledger_owners
  description: Write access to ledger file
  gid: 5004
---
type: group
group:
  name: shuttle_runners
  description: Can execute shuttle applications
  gid: 5010
---
type: group
group:
  name: shuttle_defender_test_runners
  description: Can run defender testing
  gid: 5011
---
type: group
group:
  name: shuttle_testers
  description: Can run shuttle test suites
  gid: 5012
---
type: group
group:
  name: shuttle_samba_in_users
  description: Inbound file submission via Samba
  gid: 5020
---
type: group
group:
  name: shuttle_samba_out_users
  description: Outbound file retrieval via Samba
  gid: 5021
---
type: user
user:
  name: shuttle_runner
  source: local
  account_type: service
  groups:
    primary: shuttle_runners
    secondary:
    - shuttle_config_readers
    - shuttle_data_owners
    - shuttle_log_owners
  shell: /usr/sbin/nologin
  home_directory: /var/lib/shuttle/shuttle_runner
  create_home: true
---
type: user
user:
  name: shuttle_defender_test_runner
  source: local
  account_type: service
  groups:
    primary: shuttle_defender_test_runners
    secondary:
    - shuttle_config_readers
    - shuttle_log_owners
    - shuttle_ledger_owners
  shell: /usr/sbin/nologin
  home_directory: /var/lib/shuttle/shuttle_defender_test_runner
  create_home: true
---
type: user
user:
  name: shuttle_in_user
  source: local
  account_type: service
  groups:
    primary: shuttle_samba_in_users
    secondary: []
  samba:
    enabled: true
  shell: /usr/sbin/nologin
  home_directory: /var/lib/shuttle/samba/shuttle_in_user
  create_home: true
---
type: user
user:
  name: shuttle_out_user
  source: local
  account_type: service
  groups:
    primary: shuttle_samba_out_users
    secondary: []
  samba:
    enabled: true
  shell: /usr/sbin/nologin
  home_directory: /var/lib/shuttle/samba/shuttle_out_user
  create_home: true
---
type: user
user:
  name: shuttle_tester
  source: local
  account_type: interactive
  groups:
    primary: shuttle_testers
    secondary:
    - shuttle_runners
    - shuttle_config_readers
  shell: /bin/bash
  home_directory: /home/shuttle_tester
  create_home: true
---
type: user
user:
  name: shuttle_admin
  source: local
  account_type: interactive
  groups:
    primary: null
    secondary:
    - shuttle_config_readers
    - shuttle_data_owners
    - shuttle_log_owners
    - shuttle_ledger_owners
    - shuttle_runners
    - shuttle_defender_test_runners
  shell: /bin/bash
  home_directory: /home/shuttle_admin
  create_home: true
---
type: path
path:
  location: /home/mathew/shuttle/work/incoming
  owner: root
  group: shuttle_data_owners
  mode: '2770'
  acls:
  - g:shuttle_samba_in_users:rwX
  default_acls:
    file:
    - u::rw-
    - g::rw-
    - o::---
    directory:
    - u::rwx
    - g::rwx
    - o::---
  description: Source directory (inbound files)
---
type: path
path:
  location: /home/mathew/shuttle/work/processed
  owner: root
  group: shuttle_data_owners
  mode: '2770'
  acls:
  - g:shuttle_samba_out_users:r-X
  default_acls:
    file:
    - u::rw-
    - g::rw-
    - o::---
    directory:
    - u::rwx
    - g::rwx
    - o::---
  description: Destination directory (processed files)
---
type: path
path:
  location: /home/mathew/shuttle/work/quarantine
  owner: root
  group: shuttle_data_owners
  mode: '2770'
  default_acls:
    file:
    - u::rw-
    - g::rw-
    - o::---
    directory:
    - u::rwx
    - g::rwx
    - o::---
  description: Quarantine directory (files being scanned)
---
type: path
path:
  location: /home/mathew/shuttle/work/hazard
  owner: root
  group: shuttle_data_owners
  mode: '2770'
  default_acls:
    file:
    - u::rw-
    - g::rw-
    - o::---
    directory:
    - u::rwx
    - g::rwx
    - o::---
  description: Hazard archive (malware/suspect files)
---
type: path
path:
  location: /home/mathew/shuttle/work/logs
  owner: root
  group: shuttle_log_owners
  mode: '2770'
  description: Log directory
---
type: path
path:
  location: /home/mathew/shuttle/config/shuttle_public.gpg
  owner: root
  group: shuttle_config_readers
  mode: '0640'
  description: Encryption key
---
type: path
path:
  location: /home/mathew/shuttle/config/ledger/ledger.yaml
  owner: root
  group: shuttle_config_readers
  mode: '0640'
  acls:
  - g:shuttle_ledger_owners:rw-
  description: Ledger file
---
type: path
path:
  location: /home/mathew/shuttle/test_area
  owner: root
  group: shuttle_testers
  mode: '0775'
  description: Test work directory
---
type: path
path:
  location: /home/mathew/shuttle/test_area/test_config.conf
  owner: root
  group: shuttle_testers
  mode: '0664'
  description: Test configuration file
